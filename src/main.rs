use std::{collections::HashMap, error::Error};

use tokio;
use rquest::tls::Impersonate;
use utils::rquest_helper::RquestHttpHelper;

mod utils;

#[tokio::main]
async fn main() -> Result<(), Box<dyn Error>> {
    let http_helper = RquestHttpHelper::new(Impersonate::OkHttp4_9, "http://localhost:7890".to_string())?;

    let mut headers = HashMap::new();
    headers.insert("User-Agent".to_string(),"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36".to_string());
    headers.insert("Cookies".to_string(), r#"__Host-next-auth.csrf-token=a6becc7460f03f25420107f03fecd4ee75fa605516474c0f3842c242427a66cf%7C5ce2d2b906e9abb89efe4790ec2919983f7ec894ae978d63af9ad891ed68a978; oai-did=d0cb0424-706b-4fac-bd73-e98d5f37f9d3; oai-hlib=true; __Secure-next-auth.callback-url=https%3A%2F%2Fchat-remix-onramp.unified-5.api.openai.com; __Secure-next-auth.session-token=eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..Ly4Loj_2PjlEFzWO.Tl6oaZOxgOddzaatPbkTGEmkwx-AEzT00c4SzyX5IW1hJHt-vWOXZkAf1qQELBg-W9OrkHp-N_QE7fcR1yz3yrtgGiW1GsogemnbeLAY2jU1_Q-ykGfJZq-L714KfDSSvlEjNqWoOBTv_nPJCiXR-GCHnueUt_BDQ9a9fhxSeFfHO6IaF4rTqqNEdosyc-W2D865cGk7JtKW5dnlpw2iqSMbrw-SGeR4a4nm2eiYGLA8EQbLfBnWx47W9Y7dlqXMtP0WDE8nx0yb_EzYeLvQ6iwigE6AJ7AGBgYnDFNFvsfiqpF92Ug_2bP9Lf1Gfa4AJHniPifjKSTiXBss5-tBv1Bx_eAXMzOa0zT940R14NeGfud7saC1Bw5ERfd0P9d8GOeRLXqO0cxMF47JLwCWV3n--Np_9K--Rd38vhfWCaTFOgNxbucJ6nr0LJnO_sNTvkj3KmB9WFGk2cI00fxwpfmzir8XwsisVPGACL0qJ_PGQLrE0XGt_SInU5Ynw9bFF8-3jIOiPamuJOb97ObE0X6BpbrPl1ZmywdHgXPEdvlJP_tZLR-Kus7JIvF1hxtyZWC2zjsHD0DXo8A3eG6Fz0Vv4x65updAc3v3KFrxvZKtKZr2leKLaTj8N7P9Lu1b9ZWqVEmWh9LZG3MK9ZqYz9HeODYDqbuiBBZJAlfP4DxTFF8KH_TbGdyb-M-heUzGuMfpXMgunW6CxuFdApdMyts9ipXSIthlNaQrD4wIlk73Vxl8Emp_9B2FB-qlXRs39xMc359WvQSmk0qJt819sc7ccK22FjsqAxoO651_KRRaM16J1pjdWt3YRFup6h8NWNrTTy7ZCYNHTfUoNIYVG7J5Pj2cWrYNdAUgaUkX59gFR0tvF97H7hi7IlBzOGANm6r3x89JulItxFbcnzI_o4DCWNFbeW_fiU3e6PeXS9zh13C_eNl370VH79FTbDG1aa5x4Or_26F6VRVX0dLs9csYkIFaxO1aEaz5J1KUwKm_os4I0wNrvwCahzK185IJ8_o_dGcV4xMoV7MiKvhTTumleJjkRTkH4Z7WCPkMDGtjWz4L0_aj2jNZXvOBFXSuGWB1zktxZFbrBjobSkFjFIql6tqmrd3xWC3JHR0g8tr9pYz2ES_ZVigtDMdn3JzC8lxzrFL0x-nyQVRHQfzaIbre-c5a2wiW1zzlPSH8wgQmu-c-Abxlz19VYjIOGnwYpiL9kWRfdwiSVzBsCotwnHxYl1fkNy3vP7GhEk2sU42b-pGIlagvQiCdgqLbrIAMkTYQevy88z0E7RfxatZf90I8ddQuPYsb1ERtAE29MONfTw3vKrF41EAZ09n64jkBsPMW2EGRddF3aWVlMnLu5s20KpiP29LYORZsP7MTFu9ZXIZssR6cJXaEoOIfMt50vRbm961xuwpXZdJuSrmb-Gnvl7y--GIElyMlldvt-MDGPg2v9fP-dvJt91dQe_aXh-EE9gUbZO_4es3TjYMt8qR2FVfbXScw52rL4pcVu0fK9-10jmtbvX9w_iFLnN_uxrsTjkitwR8zTkolU2LcSMkk8N7UHJEv-O5fGIH0aguPIdzzY37B40GVBLE2AuZ-VW9GX8dCBmSVgcOJ3uAITZ6srrBGCmKfqP5HeT4caBR_7_ovpm2y-tWHj7PSqSgeb0lmtTZlWfLPotQ7067DWMitTeYH_57kNpABPlkmv9_mHdZ_Mqrg_Uve216zdil-qw27vVmGpVZWRLI0HbylMphw-38aoZ4bGkjXTWxNs2oPFrBNEbP1rrsixxwlNcklflkZWNxjmiHJog5KYUR906SYz4WXTm30eE_TMOCvYIGp0HUOOMxVoOGwciSY-gzV4JiiamjgJmUPZQKZZQP9PVybnG3SsSXfnSniF5on_jA-6yJLmkI7mLjJWfj1F6Fk3L6njmJREM9iILAXEvxTkQsgbVUtRM1kf_oFIO2HUUzLxPGvFlJ2knBEVGwaPvCkXCUnefGWDYXm0hAg_ET5mxvJbAI1e76OQQAcrozownZK1o-O9Monb-qmtV7Cs1wBHqAcU4T9ZPY8y2_s9ldSznCXuuVCLoeIA19ikqmJBz8uJuw7xece3Wg3XY39X1XjdQIu4Si_uDoImXLMFJKO-L4YNMAYemp1JZYAf2ldmJvakdoarmtSxBI9MkcJf2yWM8sQG5gaJuWjudnig60HDilVohaVqtBkIomk74P3wK5RUnbnvRlxr25i44GnvYARQs8wxxp2Po2Reh4BWwZ4asImb25COjFbv_2aARdewGaqBnDWGfL6Kiv61uQnhi46uL0xo17ILHhpBXlnsWpaOCCB2jxKPQgPv7Un1SPyRHv40zMMSmIQVcd-Q_H6tlAjVhWPcu-5AOOYqADDM1u3nfX-LCqZiPrTEfh0JF1F0ftKJNjTQPJyTDYNRkHDx0sHP1Hj0YpwMuJYiXCE4JtuMS48uk2MjtWnFkfaiVqwEt6se77mIfKC61NxufQQhtZRjWJpIX9MxgCagOd3nHXKD5QMCOD0ymlvnjw4MUuNqxHWweaWydXhXKNiz6Pi8Q7gqv_IyJ5tbITrl6w-v0nyeYEWfORH-RB3eFsWWzL9g8-D83zqbEvYwfoJKkC7MSfj-WznHIxTWvRYhmQHQkrArADG-406brTxdaxrOXTAeSaCFFeAK_8dJzCDl4N-42TOwRPFnMmB3s3SYkLm5cvWDowRvVBe_7u6Ie6d5BmLkF-gULxwWtlzEv-4EP0DogL9RwfbqLd7hOgdALhNo4N9qEc5MV-tad9puxvpTlZ-WlVCeSBsXkbZhyHB0jHx9l08hgyBsshqFcC5eQYc3ewgdf14I_6oSvD8SPJv4Ue70ubeqY11-MrW9xnxwmDJt-JEm6jvf74U0LqkAuyEZ3jOky6hbjzRvbsmQY1WKmtg2iESM6mmDg1eOAzp-7c79u6FQZ7dRbyfBMGJP8huxPZ0JKctGPJ42No2tNgHstHsrOQajKh7qAYUVJ0UrbYLU9QnXopOgEIgiUsBag.PXeA9y15dSHtxvpgE8myEQ; __cf_bm=4C7uzKa.S7UFrLSDizY2m21hMggZy.dZrrQqjNe7sQE-1725950467-1.0.1.1-jO3vbLgN_QEpEXQUh2K4POfkUPfnrkyJ_aI4a1B6tKGXdwhANguzcBl3.XReAu.qVhM3xFP4AWqJL3gMSWx5MA; __cflb=0H28vzvP5FJafnkHxj4GT4DfDshTJ6UD3vSnxUwvQER; _cfuvid=jo5hY1kADTy7pVJRgK6imVK8Gg2aSO_csLHQO2WHgQI-1725950467827-0.0.1.1-604800000; cf_clearance=6wgJnWI6UVNwEo5UV58njAxkC7h9dvMH0Zk0AqePfYg-1725950470-1.2.1.1-78owbN_1nlftRW0p.nTWSDD8FRxKQYEvruyM6grVzENufuRhdsO5mWMH2.lrs1L6rYhwPZXT27dWvDGz2QHmx8pgtuxH5IcUqkn.ns3jkYhfG2j3OpbaNEUgTkulEdiUYt7blRdk.i8eeQNPEw5p63Ukw82yhU1dLhLDwdK.KYbBcp4gO7iMIJLh2Axzm6N1IWtmVz1SQV4m3B.CwsdfC70fd87SvNev6aoITylgBIkxYH.FV8h5lZGxOFdmgzR89YMlDqIjEJdAlcpDU.2FMKnb0dS8snIhiJIIwihZgLlU_s4hlICULmJvR380.PPCf3_Dfu9CxkI9JZ9qBcCsD6L2_7GIko2pCWZo5QDRBigQY8MVTjAFSucUEqR.3mjInRmE1XLkdYhrH_vCx8o5_w; _uasid="Z0FBQUFBQm0zLW91SXo2aFJEejhsaHhvTXN0TGlPb2RHWlc2YjFiN3VMSDdLZVotdVpPV0ZRX0ZSQjhQdXp2UnQtdlY3MUFkdk9qSVd1OUJRb2U3cFVjb3hiZFBRQXFQa3NCYVZ0MGVTbnViUHI2TklKRXlSM05MU01BSTRLZkJ3X01fTW03ek9KS09uc0hmZXRLRnN6R1NJSGFEYVBEVHZLeDlza3hOMnMzVWk2U1doRHh4R21BSkZMeXl2TW9oSUNFakJGVnpxU3RlcmVDRUJZdG8zVUhTNGFWemwzUFJ3QkRlTXVRSDVrVkZQcVhOU3VGTUNZeHJ5SWFJY1Y0bnpKbU9BSjN0VzRVdlg3bWhkdzg4MkZFakJGeWJfeTRLa1kxeUd6czMyMWV0MExiYmxDcW5LX0FnWlZHcGNUSDNKa1IzdHpDdjhrVU96bEtja0EzZzdXUDJuU0lLSUR4bkF3PT0="; _umsid="Z0FBQUFBQm0zLW91c1lULXV4WGgtWThscGx5VkhxTkhLMkU1VXp1SUE1NlVXdjQ5cVBCODY0OWNtZmhGRWZRdGx5OVplUGFPbkZJdmg0R1FaRGxfNjZHbU10OUJiSGRNanU2LWpTM0c2cTN3VzdMM215TnlsdFRmelpsMThYTVB2ZUNrXzRwc1hhbTlZTm5OZUQxTDFxM2wwTS1XOXp1TGxOMHJvcXZzTExtNDktdlkwVVNjNkU2QXUzYy1hODJ5Q0k2RlZpZHpDaXFPUkVmVUpnOE5td2w0OGFWcG1IMkFHaDRKMTZXX1p5ZnZBTkdsRGs5ekpGOD0="; _dd_s=rum=0&expire=1725951429711&logs=1&id=1298e31c-ffa2-44ec-8de6-a8c0ad3d03b8&created=1725950469706"#.to_string());

    let cookies = HashMap::new();

    let resp = http_helper.get("https://chatgpt.com/api/auth/csrf".to_string(), &headers, &cookies).await?;

    println!("{}", resp.status());
    println!("{}", resp.text().await?);

    Ok(())
}
